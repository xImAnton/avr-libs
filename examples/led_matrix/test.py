a = 0b1001111110010110

b = 0b0011010100110001
row_i = 0

row =   (b & (1 << (12 + row_i))) >> ((12 + row_i) - 3) |\
        (b & (1 << ( 8 + row_i))) >> (( 8 + row_i) - 2) |\
        (b & (1 << ( 4 + row_i))) >> (( 4 + row_i) - 1) |\
        (b & (1 << (     row_i))) >> ((     row_i))

n = 15
# o = ((((((a & 0xF000) >> 12) << 1) & 0xF) | ((n & 0b1000) >> 3)) << 12) |\
#     ((((((a & 0x0F00) >>  8) << 1) & 0xF) | ((n & 0b0100) >> 2)) <<  8) |\
#     ((((((a & 0x00F0) >>  4) << 1) & 0xF) | ((n & 0b0010) >> 1)) <<  4) |\
#     ((((((a & 0x000F)      ) << 1) & 0xF) | ((n & 0b0001)     ))      )

o = (((((a & 0xF000) >> 12) >> 1) | (n & 0b1000)     ) << 12) | \
    (((((a & 0x0F00) >>  8) >> 1) | (n & 0b0100) << 1) <<  8) | \
    (((((a & 0x00F0) >>  4) >> 1) | (n & 0b0010) << 2) <<  4) | \
    (((((a & 0x000F)      ) >> 1) | (n & 0b0001) << 3)      )

print(o)
